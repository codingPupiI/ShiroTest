{"remainingRequest":"D:\\IdeaProjects\\MyBlog\\myblog-vue\\node_modules\\babel-loader\\lib\\index.js!D:\\IdeaProjects\\MyBlog\\myblog-vue\\src\\axios.js","dependencies":[{"path":"D:\\IdeaProjects\\MyBlog\\myblog-vue\\src\\axios.js","mtime":1644340634846},{"path":"D:\\IdeaProjects\\MyBlog\\myblog-vue\\babel.config.js","mtime":1644314921263},{"path":"D:\\IdeaProjects\\MyBlog\\myblog-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\IdeaProjects\\MyBlog\\myblog-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgcm91dGVyIGZyb20gIi4vcm91dGVyIjsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gImh0dHA6Ly9sb2NhbGhvc3Q6ODA4MSI7IC8vIOWJjeWItuaLpuaIqgoKYXhpb3MuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICByZXR1cm4gY29uZmlnOwp9KTsgLy8g5ZCO572u5oum5oiqCgpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICB2YXIgcmVzID0gcmVzcG9uc2UuZGF0YTsKICBjb25zb2xlLmxvZyhyZXMpOwoKICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgcmV0dXJuIHJlc3BvbnNlOwogIH0gZWxzZSB7CiAgICBFbGVtZW50Lk1lc3NhZ2UuZXJyb3IocmVzLmRhdGEsIHsKICAgICAgZHVyYXRpb246IDMgKiAxMDAwCiAgICB9KTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXMuZGF0YSk7CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IucmVzcG9uc2UuZGF0YSkgewogICAgZXJyb3IubWVzc2FnZSA9IGVycm9yLnJlc3BvbnNlLmRhdGEubXNnOwogIH0KCiAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PSA0MDEpIHsKICAgIHN0b3JlLmNvbW1pdCgiUkVNT1ZFX0lORk8iKTsKICAgIHJvdXRlci5wdXNoKCIvbG9naW4iKTsKICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+36YeN5paw55m75b2VJzsKICB9CgogIGlmIChlcnJvci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMykgewogICAgZXJyb3IubWVzc2FnZSA9ICfmnYPpmZDkuI3otrPvvIzml6Dms5Xorr/pl64nOwogIH0KCiAgRWxlbWVudC5NZXNzYWdlKHsKICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsCiAgICB0eXBlOiAnZXJyb3InLAogICAgZHVyYXRpb246IDMgKiAxMDAwCiAgfSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7"},{"version":3,"sources":["D:/IdeaProjects/MyBlog/myblog-vue/src/axios.js"],"names":["axios","Element","router","store","defaults","baseURL","interceptors","request","use","config","response","console","log","res","data","code","Message","error","duration","Promise","reject","message","msg","status","commit","push","type"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AAEAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAyB,uBAAzB,C,CAEA;;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACrC,SAAOA,MAAP;AACH,CAFD,E,CAIA;;AACAT,KAAK,CAACM,YAAN,CAAmBI,QAAnB,CAA4BF,GAA5B,CAAgC,UAAAE,QAAQ,EAAI;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AACA,MAAIG,GAAG,GAAGH,QAAQ,CAACI,IAAnB;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYC,GAAZ;;AAEA,MAAIA,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AAClB,WAAOL,QAAP;AACH,GAFD,MAEO;AACHT,IAAAA,OAAO,CAACe,OAAR,CAAgBC,KAAhB,CAAsBJ,GAAG,CAACC,IAA1B,EAAgC;AAACI,MAAAA,QAAQ,EAAE,IAAI;AAAf,KAAhC;AACA,WAAOC,OAAO,CAACC,MAAR,CAAeP,GAAG,CAACC,IAAnB,CAAP;AACH;AACJ,CAXL,EAYI,UAAAG,KAAK,EAAI;AACL,MAAGA,KAAK,CAACP,QAAN,CAAeI,IAAlB,EAAwB;AACpBG,IAAAA,KAAK,CAACI,OAAN,GAAgBJ,KAAK,CAACP,QAAN,CAAeI,IAAf,CAAoBQ,GAApC;AACH;;AAED,MAAIL,KAAK,CAACP,QAAN,CAAea,MAAf,IAAyB,GAA7B,EAAkC;AAC9BpB,IAAAA,KAAK,CAACqB,MAAN,CAAa,aAAb;AACAtB,IAAAA,MAAM,CAACuB,IAAP,CAAY,QAAZ;AACAR,IAAAA,KAAK,CAACI,OAAN,GAAgB,OAAhB;AACH;;AACD,MAAIJ,KAAK,CAACP,QAAN,CAAea,MAAf,KAA0B,GAA9B,EAAmC;AAC/BN,IAAAA,KAAK,CAACI,OAAN,GAAgB,WAAhB;AACH;;AACDpB,EAAAA,OAAO,CAACe,OAAR,CAAgB;AACZK,IAAAA,OAAO,EAAEJ,KAAK,CAACI,OADH;AAEZK,IAAAA,IAAI,EAAE,OAFM;AAGZR,IAAAA,QAAQ,EAAE,IAAI;AAHF,GAAhB;AAKA,SAAOC,OAAO,CAACC,MAAR,CAAeH,KAAf,CAAP;AACH,CA/BL","sourcesContent":["import axios from 'axios'\r\nimport Element from 'element-ui'\r\nimport router from \"./router\"\r\nimport store from './store'\r\n\r\naxios.defaults.baseURL = \"http://localhost:8081\"\r\n\r\n// 前制拦截\r\naxios.interceptors.request.use(config => {\r\n    return config;\r\n})\r\n\r\n// 后置拦截\r\naxios.interceptors.response.use(response => {\r\n        console.log(response);\r\n        let res = response.data;\r\n        console.log(res);\r\n\r\n        if (res.code === 200) {\r\n            return response;\r\n        } else {\r\n            Element.Message.error(res.data, {duration: 3 * 1000});\r\n            return Promise.reject(res.data);\r\n        }\r\n    },\r\n    error => {\r\n        if(error.response.data) {\r\n            error.message = error.response.data.msg\r\n        }\r\n\r\n        if (error.response.status == 401) {\r\n            store.commit(\"REMOVE_INFO\");\r\n            router.push(\"/login\");\r\n            error.message = '请重新登录';\r\n        }\r\n        if (error.response.status === 403) {\r\n            error.message = '权限不足，无法访问';\r\n        }\r\n        Element.Message({\r\n            message: error.message,\r\n            type: 'error',\r\n            duration: 3 * 1000\r\n        })\r\n        return Promise.reject(error)\r\n    })"]}]}